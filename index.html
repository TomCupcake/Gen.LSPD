<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>LSPD • משטרת לוס סנטוס</title>
  <link rel="icon" href="LSPD.png" type="image/png">
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0e1b35;
      --surface: #15243f;
      --text: #f1f5f9;
      --text-dim: #c3d4e9;
      --primary: #5aafff;
      --primary-glow: #5aafff44;
      --accent: #ff5e5e;
      --border: #2b3d5c;
      --glass: rgba(21,36,63,0.65);
      --blur: blur(12px);
    }

    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family:'Heebo',sans-serif;
      background:var(--bg);
      color:var(--text);
      min-height:100vh;
      line-height:1.6;
      direction:rtl;
      touch-action:manipulation;
      font-size:16px;
    }

    header {
      position:fixed;
      top:0; left:0; right:0;
      z-index:1000;
      background:linear-gradient(180deg,#1c2f52 0%,#13203a 100%);
      border-bottom:1px solid rgba(90,175,255,0.22);
      box-shadow:0 4px 20px rgba(0,0,0,0.5);
      backdrop-filter:var(--blur);
    }

    .nav-container {
      max-width:1380px;
      margin:0 auto;
      padding:0.9rem 1.2rem;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    .logo-area {
      display:flex;
      align-items:center;
      gap:0.8rem;
    }

    .logo-area img { width:44px; }

    .logo-area span {
      font-size:1.6rem;
      font-weight:700;
      background:linear-gradient(90deg,#a3d4ff,#5aafff);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }

    #userGreeting {
      font-size:0.95rem;
      color:var(--text-dim);
      margin-right:0.6rem;
    }

    nav ul {
      display:flex;
      align-items:center;
      gap:1.4rem;
      list-style:none;
    }

    nav a {
      color:var(--text-dim);
      text-decoration:none;
      font-weight:500;
      font-size:1rem;
    }

    nav a:hover { color:white; }

    .auth-btn {
      padding:0.55rem 1.2rem;
      border-radius:6px;
      font-weight:600;
      font-size:0.95rem;
      cursor:pointer;
    }

    #loginBtn {
      background:transparent;
      border:2px solid var(--primary);
      color:var(--primary);
    }

    #logoutBtn {
      background:transparent;
      border:2px solid var(--accent);
      color:var(--accent);
    }

    .burger {
      display:none;
      font-size:1.8rem;
      color:var(--text-dim);
      cursor:pointer;
      padding:0.4rem;
    }

    @media (max-width: 860px) {
      .burger { display:block; }
      nav ul {
        display:none;
        flex-direction:column;
        position:absolute;
        top:100%;
        right:0;
        background:var(--surface);
        width:100%;
        padding:1.4rem;
        border-top:1px solid var(--border);
      }
      nav ul.active { display:flex; }
      .nav-container { padding:0.9rem 1rem; }
      .logo-area span { font-size:1.4rem; }
      #userGreeting { font-size:0.9rem; }
    }

    @media (max-width: 480px) {
      .logo-area img { width:38px; }
      .logo-area span { font-size:1.25rem; }
      h1 { font-size:2.1rem; }
      .section-title { font-size:1.7rem; }
      input, textarea, button { font-size:1rem; padding:0.9rem; }
    }

    main { padding-top:70px; }

    .hero {
      height:90vh;
      min-height:600px;
      position:relative;
      overflow:hidden;
    }

    .carousel { position:absolute; inset:0; }
    .slide { position:absolute; inset:0; opacity:0; transition:opacity 1.6s; }
    .slide.active { opacity:1; }
    .slide img { width:100%; height:100%; object-fit:cover; filter:brightness(0.7); }

    .hero-overlay {
      position:absolute;
      inset:0;
      background:linear-gradient(to bottom,rgba(14,27,53,0.5),rgba(14,27,53,0.92));
      z-index:2;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:0 1rem;
    }

    .hero h1 { font-size:clamp(2.4rem,8vw,4.2rem); color:#b3d4ff; margin-bottom:0.5rem; }
    .hero .lead { font-size:clamp(1.2rem,3.5vw,1.6rem); color:var(--text-dim); }
    .hero .slogan { font-size:clamp(1.5rem,4.5vw,2rem); color:#8bb8ff; font-style:italic; }

    .quote-area {
      position:absolute;
      bottom:8%;
      left:50%;
      transform:translateX(-50%);
      text-align:center;
      max-width:90%;
    }

    .quote-area p { font-size:clamp(1.4rem,4vw,2rem); color:white; }
    .quote-area .author { font-size:clamp(1rem,2.5vw,1.3rem); color:#c3d4e9; }

    .complaint-section { padding:5rem 1.2rem 7rem; }
    .section-title { text-align:center; font-size:2rem; color:#8bb8ff; margin-bottom:2.5rem; }
    .form-glass {
      max-width:720px;
      margin:0 auto;
      background:var(--glass);
      backdrop-filter:var(--blur);
      border:1px solid rgba(90,175,255,0.2);
      border-radius:12px;
      padding:2rem 1.6rem;
      box-shadow:0 10px 30px rgba(0,0,0,0.45);
    }

    .form-group { margin-bottom:1.4rem; }
    label { display:block; margin-bottom:0.5rem; color:var(--text-dim); font-weight:500; }
    input, textarea {
      width:100%;
      padding:0.95rem 1.2rem;
      background:rgba(15,26,47,0.75);
      border:1px solid var(--border);
      border-radius:8px;
      color:var(--text);
      font-size:1.05rem;
    }

    textarea { min-height:120px; resize:vertical; }

    input:focus, textarea:focus {
      border-color:var(--primary);
      box-shadow:0 0 10px var(--primary-glow);
      outline:none;
    }

    .submit-btn {
      width:100%;
      padding:1rem;
      background:var(--accent);
      color:white;
      border:none;
      border-radius:8px;
      font-size:1.1rem;
      font-weight:600;
      cursor:pointer;
    }

    .submit-btn:hover { background:#d32f2f; transform:translateY(-1px); }

    footer {
      background:#0b1428;
      border-top:1px solid var(--border);
      padding:3rem 1.2rem;
      text-align:center;
      color:var(--text-dim);
    }

    footer img { width:55px; border-radius:50%; margin-bottom:0.8rem; }

    .modal {
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.85);
      backdrop-filter:blur(5px);
      display:none;
      place-items:center;
      z-index:2000;
    }

    .modal.active { display:grid; }

    .modal-content {
      background:var(--glass);
      backdrop-filter:var(--blur);
      border:1px solid rgba(90,175,255,0.25);
      border-radius:12px;
      width:92%;
      max-width:400px;
      padding:1.8rem 1.4rem;
      box-shadow:0 14px 40px rgba(0,0,0,0.6);
    }

    .modal-header {
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:1.4rem;
    }

    .modal-title { font-size:1.45rem; color:var(--primary); }

    .close-modal {
      background:none;
      border:none;
      font-size:2rem;
      color:var(--text-dim);
      cursor:pointer;
    }

    .error-text { color:var(--accent); font-size:0.9rem; margin-top:0.4rem; }
  </style>
</head>
<body>

<header>
  <div class="nav-container">
    <div class="logo-area">
      <img src="LSPD.png" alt="LSPD">
      <span>LSPD</span>
      <span id="userGreeting"></span>
    </div>

    <nav>
      <ul id="mainNavUl">
        <li><a href="#home">ראשי</a></li>
        <li><a href="roster.html">רוסטר</a></li>
        <li><a href="policeprocedures.html">נהלים</a></li>
        <li><a href="Patrol.html">פטרול</a></li>
        <li><a href="Detective.html">דיטקטיב</a></li>
        <li><a href="SWAT.html">סוואט</a></li>
        <li id="loginItem"><button class="auth-btn" id="loginBtn">התחברות</button></li>
        <li id="commandMenu" style="display:none;"><a href="command.html">מידע לפיקוד</a></li>
        <li id="adminMenu" style="display:none;"><a href="admin.html">אדמין פאנל</a></li>
        <li id="logoutMenu" style="display:none;">
          <button class="auth-btn" id="logoutBtn">התנתק</button>
        </li>
      </ul>
      <div class="burger" id="burgerMenu">☰</div>
    </nav>
  </div>
</header>

<div class="modal" id="loginModal">
  <div class="modal-content">
    <div class="modal-header">
      <div class="modal-title">כניסה למערכת LSPD</div>
      <button class="close-modal" id="closeLogin">×</button>
    </div>
    <form id="loginForm">
      <div class="form-group">
        <label for="username">שם משתמש</label>
        <input type="text" id="username" required autocomplete="username">
      </div>
      <div class="form-group">
        <label for="password">סיסמה</label>
        <input type="password" id="password" required autocomplete="current-password">
      </div>
      <div class="error-text" id="loginError"></div>
      <button type="submit" class="submit-btn">כניסה</button>
    </form>
  </div>
</div>

<main>
  <section class="hero" id="home">
    <div class="carousel">
      <div class="slide active"><img src="hallway.png" alt=""></div>
      <div class="slide"><img src="command.png" alt=""></div>
      <div class="slide"><img src="command2.png" alt=""></div>
      <div class="slide"><img src="officers.png" alt=""></div>
      <div class="slide"><img src="promotion.png" alt=""></div>
    </div>

    <div class="hero-overlay">
      <div class="hero-content">
        <h1>משטרת לוס סנטוס</h1>
        <p class="lead">אתר מידע מבצעי לשוטרים</p>
        <div class="slogan">"To Obey & Survive"</div>
      </div>
    </div>

    <div class="quote-area">
      <p id="quoteText">"ציטוט 1"</p>
      <div class="author">— כותב 1</div>
    </div>
  </section>

  <section class="complaint-section">
    <h2 class="section-title">הגשת תלונה אנונימית</h2>
    <div class="form-glass">
      <form id="complaintForm">
        <div class="form-group">
          <label for="commanderName">שם המפקד</label>
          <input type="text" id="commanderName" required>
        </div>
        <div class="form-group">
          <label for="badgeNumber">מספר תג</label>
          <input type="text" id="badgeNumber" required>
        </div>
        <div class="form-group">
          <label for="subject">נושא התלונה</label>
          <input type="text" id="subject" required>
        </div>
        <div class="form-group">
          <label for="content">תוכן התלונה</label>
          <textarea id="content" required></textarea>
        </div>
        <button type="submit" class="submit-btn">שלח תלונה אנונימית</button>
      </form>
    </div>
  </section>
</main>

<footer>
  <img src="gen.png" alt="">
  <p>© 2025–2026 | נבנה על ידי tomcupcake</p>
</footer>

<script>
const BIN_ID_COMPLAINTS = '69789c5d43b1c97be94e3c8b';
const BIN_ID_USERS      = '69789ce8d0ea881f4089a7fd';

async function loadData(binId, key) {
  try {
    const r = await fetch(`https://api.jsonbin.io/v3/b/${binId}`);
    const d = await r.json();
    return d.record[key] || (key === 'users' ? {} : []);
  } catch(e) {
    console.error(e);
    return key === 'users' ? {} : [];
  }
}

async function saveData(binId, key, value) {
  try {
    await fetch(`https://api.jsonbin.io/v3/b/${binId}`, {
      method: 'PUT',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ [key]: value })
    });
  } catch(e) {
    console.error(e);
  }
}

// ───────────────────────────────────────────────
// Mobile burger
document.addEventListener('DOMContentLoaded', () => {
  const burger   = document.getElementById('burgerMenu');
  const navUl    = document.querySelector('#mainNavUl');

  if (burger && navUl) {
    burger.addEventListener('click', () => {
      navUl.classList.toggle('active');
      burger.textContent = navUl.classList.contains('active') ? '✕' : '☰';
    });
  }
});

// ───────────────────────────────────────────────
// Carousel + quotes
const slides   = document.querySelectorAll('.slide');
const quoteEl  = document.getElementById('quoteText');
const authorEl = document.querySelector('.quote-area .author');
const quotes = [
  {q:"\"ציטוט 1\"", a:"— כותב 1"},
  {q:"\"ציטוט 2\"", a:"— כותב 2"},
  {q:"\"ציטוט 3\"", a:"— כותב 3"}
];
let si = 0;
function rotate() {
  slides.forEach(s=>s.classList.remove('active'));
  slides[si].classList.add('active');
  quoteEl.textContent  = quotes[si].q;
  authorEl.textContent = quotes[si].a;
  si = (si+1) % slides.length;
}
setInterval(rotate, 7000);
rotate();

// ───────────────────────────────────────────────
// Auth
let users = {};
let currentUser = localStorage.getItem("lspd_currentUser");

function updateUI() {
  const logged = !!localStorage.getItem("lspd_loggedIn");
  document.getElementById('loginItem').style.display       = logged ? 'none' : 'list-item';
  document.getElementById('commandMenu').style.display     = logged ? 'list-item' : 'none';
  document.getElementById('adminMenu').style.display       = (logged && currentUser === "Artzy") ? 'list-item' : 'none';
  document.getElementById('logoutMenu').style.display      = logged ? 'list-item' : 'none';

  if (logged && currentUser) {
    document.getElementById('userGreeting').textContent = `${getGreeting()} טובים, ${currentUser}`;
  } else {
    document.getElementById('userGreeting').textContent = '';
  }
}

const loginBtn   = document.getElementById('loginBtn');
const loginModal = document.getElementById('loginModal');
const closeLogin = document.getElementById('closeLogin');
const loginForm  = document.getElementById('loginForm');
const loginError = document.getElementById('loginError');

loginBtn?.addEventListener('click',   () => loginModal?.classList.add('active'));
closeLogin?.addEventListener('click', () => loginModal?.classList.remove('active'));

loginForm?.addEventListener('submit', async e => {
  e.preventDefault();
  const u = document.getElementById('username')?.value.trim();
  const p = document.getElementById('password')?.value;

  if (!u || !p) {
    loginError.textContent = "מלא שם משתמש וסיסמה";
    return;
  }

  // Hard-coded admin
  if (u === "Artzy" && p === "gili1&Dori2") {
    localStorage.setItem("lspd_loggedIn", "true");
    localStorage.setItem("lspd_currentUser", "Artzy");
    updateUI();
    loginModal?.classList.remove('active');
    loginError.textContent = '';
    return;
  }

  // JSONBin users
  users = await loadData(BIN_ID_USERS, 'users');

  if (users[u] && users[u].password === p) {
    localStorage.setItem("lspd_loggedIn", "true");
    localStorage.setItem("lspd_currentUser", u);
    updateUI();
    loginModal?.classList.remove('active');
    loginError.textContent = '';
  } else {
    loginError.textContent = "שם משתמש או סיסמה שגויים";
  }
});

document.getElementById('logoutBtn')?.addEventListener('click', () => {
  localStorage.removeItem("lspd_loggedIn");
  localStorage.removeItem("lspd_currentUser");
  updateUI();
  location.href = "index.html";
});

// Initial check
updateUI();

// Complaint form
document.getElementById('complaintForm')?.addEventListener('submit', async e => {
  e.preventDefault();

  const commander = document.getElementById('commanderName')?.value.trim();
  const badge     = document.getElementById('badgeNumber')?.value.trim();
  const subject   = document.getElementById('subject')?.value.trim();
  const content   = document.getElementById('content')?.value.trim();

  if (!commander || !badge || !subject || !content) {
    alert("מלא את כל השדות בבקשה");
    return;
  }

  let complaints = await loadData(BIN_ID_COMPLAINTS, 'complaints');

  complaints.push({
    id: Date.now(),
    commander,
    badge,
    subject,
    content,
    date: new Date().toLocaleString('he-IL')
  });

  await saveData(BIN_ID_COMPLAINTS, 'complaints', complaints);

  alert("תלונה נשלחה בהצלחה!");
  e.target.reset();
});

function getGreeting() {
  const h = new Date().getHours();
  return h < 12 ? 'בוקר' : h < 18 ? 'צהריים' : 'ערב';
}
</script>
</body>
</html>